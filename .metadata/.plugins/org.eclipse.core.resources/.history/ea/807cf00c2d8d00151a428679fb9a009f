package tests;
import static org.mockito.Mockito.*;
import java.io.ByteArrayInputStream;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.InputMismatchException;
import java.util.List;
import static org.junit.Assert.*;
import org.junit.Test;
import Yatzy.Dice;
import Yatzy.game;



public class mainTest {
	//private field with minumum and maximun values allowed
	private static final int min = 1;
	private static final int max = 6;
	
	   @Test
	   //Test by Emil and Mikael.
	   public void test_diceValues() {
		   Dice die = new Dice();
		   die.ThrowDie(min,max);
		   assertTrue(die.GetValue() <= max && die.GetValue() >= min);
	   }
	   
	   //Test written by Mikael
	   //implementing refactor code.
	   //Testing if exception is thrown if more than 5 dices are thrown
	   @Test(expected=IndexOutOfBoundsException.class)
	   public void test_numberOfThrowsExceptionTest_HighValue(){
		   game g = new game();
		   g.ThrowDices(6);
	   }
	   
	   @Test(expected=IndexOutOfBoundsException.class)
	   public void test_numberOfThrowsExceptionTest_LowValue(){
		   game g = new game();
		   g.ThrowDices(4);
	   }
	   
	   @Test(expected=InputMismatchException.class)
	   public void test_MenuChoiceExceptionTest_NotInteger(){
		   ByteArrayInputStream in = new ByteArrayInputStream("t".getBytes());
		   game g = new game();
		   g.menuInput(in);
	   }
	   
	   @Test(expected=IndexOutOfBoundsException.class)
	   public void test_MenuChoiceExceptionTest_NotInRange(){
		   ByteArrayInputStream in = new ByteArrayInputStream("0".getBytes());
		   game g = new game();
		   g.menuInput(in);
	   }
	   
	   @Test(expected=IndexOutOfBoundsException.class)
	   public void test_CheckDiceListSize(){
		   game g = new game();
		   g.ThrowDices(5);
		   g.PrintResult(4);
	   }
	   
	   //Just some testing code, everything below should be ignored.
//	   @Test
//	   public void test_testtest(){
//
//		   game g = mock(game.class);
//		   g.PrintResult(1);
//		   verify(g, times(1)).GetDiceByNumber(1);
//
//		   
//	   }
	   
	   @Test
	   public void out() {
	       game g = new game();
	       //Dice d = new Dice();
	       g.ThrowDices(5);
	       Dice d = mock(Dice.class);
	       verify(d, times(5)).GetValue();
	       d.ThrowDie(min, max);
	       g.diceList.clear();
	       g.diceList.add(d);
	       g.diceList.add(d);
	       g.diceList.add(d);
	       g.diceList.add(d);
	       g.diceList.add(d);
	       g.PrintResult(5);
	       assertEquals("1 1 1 1 1 ", g.outContent.toString());
	   }
	   
	//Test returning a specific dice that should be rethrown
}
